{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\REDZE\\\\Desktop\\\\project\\\\CRA\\\\cra\\\\internetmall\\\\src\\\\pages\\\\front\\\\ProductDetail.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useOutletContext, useParams } from 'react-router-dom';\nimport Loading from '../../components/Loading';\nimport { useDispatch } from 'react-redux';\nimport { createAsyncMessage } from '../../slice/messageSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProductDetail() {\n  _s();\n  const [product, setProduct] = useState({});\n  const [cartQuantity, setCartQuantity] = useState(1);\n  const {\n    id\n  } = useParams();\n  const [isLoading, setIsLoading] = useState(false);\n  const {\n    getCart\n  } = useOutletContext();\n  const dispatch = useDispatch();\n  const getProduct = async id => {\n    setIsLoading(true);\n    const productRes = await axios.get(`/v2/api/${process.env.REACT_APP_API_PATH}/product/${id}`);\n    setProduct(productRes.data.product);\n    setIsLoading(false);\n  };\n  const addToCart = async () => {\n    setIsLoading(true);\n    const data = {\n      data: {\n        product_id: product.id,\n        qty: cartQuantity\n      }\n    };\n    try {\n      const res = await axios.post(`/v2/api/${process.env.REACT_APP_API_PATH}/cart`, data);\n      console.log(res);\n      dispatch(createAsyncMessage(res.data));\n      getCart();\n      setIsLoading(false);\n    } catch (error) {\n      console.log(error);\n      dispatch(createAsyncMessage(error.response.data));\n      setIsLoading(false);\n    }\n  };\n  useEffect(() => {\n    getProduct(id);\n  }, [id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(Loading, {\n      isLoading: isLoading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        minHeight: '400px',\n        backgroundImage: `url(${product.imageUrl})`,\n        backgroundPosition: 'center center'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row justify-content-between mt-4 mb-7\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-7\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mb-0\",\n          children: product.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"fw-bold\",\n          children: [\"NT$ \", product.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: product.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"my-4\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: product.imageUrl,\n            alt: \"\",\n            className: \"img-fluid mt-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group mb-3 border mt-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group-prepend\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-primary rounded-0 border-0 py-3\",\n              type: \"button\",\n              id: \"button-addon1\",\n              onClick: () => {\n                setCartQuantity(pre => pre === 1 ? pre : pre - 1);\n              },\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-dash\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            className: \"form-control border-0 text-center my-auto shadow-none\",\n            placeholder: \"\",\n            \"aria-label\": \"Example text with button addon\",\n            \"aria-describedby\": \"button-addon1\",\n            readOnly: true,\n            value: cartQuantity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group-append\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-primary rounded-0 border-0 py-3\",\n              type: \"button\",\n              id: \"button-addon2\",\n              onClick: () => {\n                setCartQuantity(pre => pre + 1);\n              },\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-plus\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-primary w-100 rounded-0 py-3\",\n          onClick: () => addToCart(),\n          disabled: isLoading,\n          children: \"\\u52A0\\u5165\\u8CFC\\u7269\\u8ECA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductDetail, \"z5we6VdOyruOof3f5hK+lRGsPBY=\", false, function () {\n  return [useParams, useOutletContext, useDispatch];\n});\n_c = ProductDetail;\nexport default ProductDetail;\nvar _c;\n$RefreshReg$(_c, \"ProductDetail\");","map":{"version":3,"names":["useEffect","useState","axios","useOutletContext","useParams","Loading","useDispatch","createAsyncMessage","jsxDEV","_jsxDEV","ProductDetail","_s","product","setProduct","cartQuantity","setCartQuantity","id","isLoading","setIsLoading","getCart","dispatch","getProduct","productRes","get","process","env","REACT_APP_API_PATH","data","addToCart","product_id","qty","res","post","console","log","error","response","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","minHeight","backgroundImage","imageUrl","backgroundPosition","title","price","content","src","alt","type","onClick","pre","placeholder","readOnly","value","disabled","_c","$RefreshReg$"],"sources":["C:/Users/REDZE/Desktop/project/CRA/cra/internetmall/src/pages/front/ProductDetail.js"],"sourcesContent":["import { useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport { useOutletContext, useParams } from 'react-router-dom'\r\nimport Loading from '../../components/Loading'\r\nimport { useDispatch } from 'react-redux'\r\nimport { createAsyncMessage } from '../../slice/messageSlice'\r\n\r\nfunction ProductDetail() {\r\n  const [product, setProduct] = useState({})\r\n  const [cartQuantity, setCartQuantity] = useState(1)\r\n  const { id } = useParams()\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const { getCart } = useOutletContext()\r\n  const dispatch = useDispatch()\r\n\r\n  const getProduct = async (id) => {\r\n    setIsLoading(true)\r\n    const productRes = await axios.get(\r\n      `/v2/api/${process.env.REACT_APP_API_PATH}/product/${id}`\r\n    )\r\n    setProduct(productRes.data.product)\r\n    setIsLoading(false)\r\n  }\r\n\r\n  const addToCart = async () => {\r\n    setIsLoading(true)\r\n    const data = {\r\n      data: {\r\n        product_id: product.id,\r\n        qty: cartQuantity\r\n      }\r\n    }\r\n    try {\r\n      const res = await axios.post(\r\n        `/v2/api/${process.env.REACT_APP_API_PATH}/cart`,\r\n        data\r\n      )\r\n      console.log(res)\r\n      dispatch(createAsyncMessage(res.data))\r\n      getCart()\r\n      setIsLoading(false)\r\n    } catch (error) {\r\n      console.log(error)\r\n      dispatch(createAsyncMessage(error.response.data))\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    getProduct(id)\r\n  }, [id])\r\n\r\n  return (\r\n    <div className='container'>\r\n      <Loading isLoading={isLoading}></Loading>\r\n      <div\r\n        style={{\r\n          minHeight: '400px',\r\n          backgroundImage: `url(${product.imageUrl})`,\r\n          backgroundPosition: 'center center'\r\n        }}\r\n      ></div>\r\n      <div className='row justify-content-between mt-4 mb-7'>\r\n        <div className='col-md-7'>\r\n          <h2 className='mb-0'>{product.title}</h2>\r\n          <p className='fw-bold'>NT$ {product.price}</p>\r\n          <p>{product.content}</p>\r\n          <div className='my-4'>\r\n            <img src={product.imageUrl} alt='' className='img-fluid mt-4' />\r\n          </div>\r\n        </div>\r\n        <div className='col-md-4'>\r\n          <div className='input-group mb-3 border mt-3'>\r\n            <div className='input-group-prepend'>\r\n              <button\r\n                className='btn btn-outline-primary rounded-0 border-0 py-3'\r\n                type='button'\r\n                id='button-addon1'\r\n                onClick={() => {\r\n                  setCartQuantity((pre) => (pre === 1 ? pre : pre - 1))\r\n                }}\r\n              >\r\n                <i className='bi bi-dash'></i>\r\n              </button>\r\n            </div>\r\n            <input\r\n              type='number'\r\n              className='form-control border-0 text-center my-auto shadow-none'\r\n              placeholder=''\r\n              aria-label='Example text with button addon'\r\n              aria-describedby='button-addon1'\r\n              readOnly\r\n              value={cartQuantity}\r\n            />\r\n            <div className='input-group-append'>\r\n              <button\r\n                className='btn btn-outline-primary rounded-0 border-0 py-3'\r\n                type='button'\r\n                id='button-addon2'\r\n                onClick={() => {\r\n                  setCartQuantity((pre) => pre + 1)\r\n                }}\r\n              >\r\n                <i className='bi bi-plus'></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <button\r\n            type='button'\r\n            className='btn btn-primary w-100 rounded-0 py-3'\r\n            onClick={() => addToCart()}\r\n            disabled={isLoading}\r\n          >\r\n            加入購物車\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProductDetail\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
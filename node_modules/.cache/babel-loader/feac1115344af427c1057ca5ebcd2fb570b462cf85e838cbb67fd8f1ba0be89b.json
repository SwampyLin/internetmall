{"ast":null,"code":"import { createContext } from 'react';\nexport const MessageContext = /*#__PURE__*/createContext({});\nexport const initState = {\n  type: '',\n  title: '',\n  text: ''\n};\n\n//Reducer\n\nexport const messageReducer = (state, action) => {\n  switch (action.type) {\n    case 'POST_MESSAGE':\n      return {\n        ...action.payload\n      };\n    case 'CLEAR_MESSAGE':\n      return {\n        ...initState\n      };\n    default:\n      return state;\n  }\n};\nexport function handleSuccessMessage(dispatch, res) {\n  dispatch({\n    type: 'POST_MESSAGE',\n    payload: {\n      type: 'success',\n      title: '更新成功',\n      text: res.data.message\n    }\n  });\n  setTimeout(() => {\n    dispatch({\n      type: 'CLEAR_MESSAGE'\n    });\n  }, 3000);\n}\nexport function handleErrorMessage(dispatch, error) {\n  var _error$response, _error$response$data, _error$response2, _error$response2$data, _error$response3, _error$response3$data;\n  dispatch({\n    type: 'POST_MESSAGE',\n    payload: {\n      type: 'danger',\n      title: '失敗',\n      text: Array.isArray(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) ? error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message.join('、') : error === null || error === void 0 ? void 0 : (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message\n    }\n  });\n  setTimeout(() => {\n    dispatch({\n      type: 'CLEAR_MESSAGE'\n    });\n  }, 3000);\n}","map":{"version":3,"names":["createContext","MessageContext","initState","type","title","text","messageReducer","state","action","payload","handleSuccessMessage","dispatch","res","data","message","setTimeout","handleErrorMessage","error","_error$response","_error$response$data","_error$response2","_error$response2$data","_error$response3","_error$response3$data","Array","isArray","response","join"],"sources":["C:/Users/REDZE/Desktop/project/CRA/cra/internetmall/src/store/messageStore.js"],"sourcesContent":["import { createContext } from 'react'\r\n\r\nexport const MessageContext = createContext({})\r\n\r\nexport const initState = {\r\n  type: '',\r\n  title: '',\r\n  text: ''\r\n}\r\n\r\n//Reducer\r\n\r\nexport const messageReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'POST_MESSAGE':\r\n      return {\r\n        ...action.payload\r\n      }\r\n    case 'CLEAR_MESSAGE':\r\n      return {\r\n        ...initState\r\n      }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function handleSuccessMessage(dispatch, res) {\r\n  dispatch({\r\n    type: 'POST_MESSAGE',\r\n    payload: {\r\n      type: 'success',\r\n      title: '更新成功',\r\n      text: res.data.message\r\n    }\r\n  })\r\n  setTimeout(() => {\r\n    dispatch({\r\n      type: 'CLEAR_MESSAGE'\r\n    })\r\n  }, 3000)\r\n}\r\n\r\nexport function handleErrorMessage(dispatch, error) {\r\n  dispatch({\r\n    type: 'POST_MESSAGE',\r\n    payload: {\r\n      type: 'danger',\r\n      title: '失敗',\r\n      text: Array.isArray(error?.response?.data?.message)\r\n        ? error?.response?.data?.message.join('、')\r\n        : error?.response?.data?.message\r\n    }\r\n  })\r\n  setTimeout(() => {\r\n    dispatch({\r\n      type: 'CLEAR_MESSAGE'\r\n    })\r\n  }, 3000)\r\n}\r\n"],"mappings":"AAAA,SAASA,aAAa,QAAQ,OAAO;AAErC,OAAO,MAAMC,cAAc,gBAAGD,aAAa,CAAC,CAAC,CAAC,CAAC;AAE/C,OAAO,MAAME,SAAS,GAAG;EACvBC,IAAI,EAAE,EAAE;EACRC,KAAK,EAAE,EAAE;EACTC,IAAI,EAAE;AACR,CAAC;;AAED;;AAEA,OAAO,MAAMC,cAAc,GAAGA,CAACC,KAAK,EAAEC,MAAM,KAAK;EAC/C,QAAQA,MAAM,CAACL,IAAI;IACjB,KAAK,cAAc;MACjB,OAAO;QACL,GAAGK,MAAM,CAACC;MACZ,CAAC;IACH,KAAK,eAAe;MAClB,OAAO;QACL,GAAGP;MACL,CAAC;IAEH;MACE,OAAOK,KAAK;EAChB;AACF,CAAC;AAED,OAAO,SAASG,oBAAoBA,CAACC,QAAQ,EAAEC,GAAG,EAAE;EAClDD,QAAQ,CAAC;IACPR,IAAI,EAAE,cAAc;IACpBM,OAAO,EAAE;MACPN,IAAI,EAAE,SAAS;MACfC,KAAK,EAAE,MAAM;MACbC,IAAI,EAAEO,GAAG,CAACC,IAAI,CAACC;IACjB;EACF,CAAC,CAAC;EACFC,UAAU,CAAC,MAAM;IACfJ,QAAQ,CAAC;MACPR,IAAI,EAAE;IACR,CAAC,CAAC;EACJ,CAAC,EAAE,IAAI,CAAC;AACV;AAEA,OAAO,SAASa,kBAAkBA,CAACL,QAAQ,EAAEM,KAAK,EAAE;EAAA,IAAAC,eAAA,EAAAC,oBAAA,EAAAC,gBAAA,EAAAC,qBAAA,EAAAC,gBAAA,EAAAC,qBAAA;EAClDZ,QAAQ,CAAC;IACPR,IAAI,EAAE,cAAc;IACpBM,OAAO,EAAE;MACPN,IAAI,EAAE,QAAQ;MACdC,KAAK,EAAE,IAAI;MACXC,IAAI,EAAEmB,KAAK,CAACC,OAAO,CAACR,KAAK,aAALA,KAAK,wBAAAC,eAAA,GAALD,KAAK,CAAES,QAAQ,cAAAR,eAAA,wBAAAC,oBAAA,GAAfD,eAAA,CAAiBL,IAAI,cAAAM,oBAAA,uBAArBA,oBAAA,CAAuBL,OAAO,CAAC,GAC/CG,KAAK,aAALA,KAAK,wBAAAG,gBAAA,GAALH,KAAK,CAAES,QAAQ,cAAAN,gBAAA,wBAAAC,qBAAA,GAAfD,gBAAA,CAAiBP,IAAI,cAAAQ,qBAAA,uBAArBA,qBAAA,CAAuBP,OAAO,CAACa,IAAI,CAAC,GAAG,CAAC,GACxCV,KAAK,aAALA,KAAK,wBAAAK,gBAAA,GAALL,KAAK,CAAES,QAAQ,cAAAJ,gBAAA,wBAAAC,qBAAA,GAAfD,gBAAA,CAAiBT,IAAI,cAAAU,qBAAA,uBAArBA,qBAAA,CAAuBT;IAC7B;EACF,CAAC,CAAC;EACFC,UAAU,CAAC,MAAM;IACfJ,QAAQ,CAAC;MACPR,IAAI,EAAE;IACR,CAAC,CAAC;EACJ,CAAC,EAAE,IAAI,CAAC;AACV"},"metadata":{},"sourceType":"module","externalDependencies":[]}